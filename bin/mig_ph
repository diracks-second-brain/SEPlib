#!/usr/bin/env python
import sys
import SEP.util
import SEP.wei
import SEP.wei_flow
import SEP.prog


main      =SEP.wei_flow.mig_main()        #main arguments for WEI migration
vel_transp=SEP.wei_flow.wtransp_interp(main)  #transpose and interpolate
schoice   =SEP.wei_flow.lloyd_wei(main)       #choose the reference slowness
wei       =SEP.wei_flow.ang_mig(main)         #migration with ph domain gathers

prefixes={}
prefixes["WEI.TI"]="ti_"
prefixes["WEI.LLOYD"]="lloyd_"


program=SEP.prog.prog("Migrate using WEI",
   "mig_ph velocity= wei_D= ", 
    [main,vel_transp,schoice,wei],
     ["PSPI migration using the SEP python library"],
      prefixes=prefixes)

     

program.get_options(delete=1)
restart=SEP.args.logic(main.param("restart"))

if not restart:
  vel_transp.prep_run()
  schoice.prep_run()
wei.prep_run(restart)
